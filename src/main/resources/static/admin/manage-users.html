<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Manage Users</title>
  <link rel="stylesheet" href="../styles/manage-users.css" />
  <link rel="stylesheet" href="../styles/style.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="../assets/images/icon.jpg">
</head>
<body>
	<header>
		<div class="container">
			<h1>Manage Users</h1>
			<p>കർത്താവിന്റെ മഹത്വം പാടാം</p>
			<p class="rotating-verse" id="rotatingVerse"></p>
		</div>
	</header>

	<!-- Navigation -->
	<nav>
  <div class="nav-links">
    <a href="../index.html" onclick="logout()"><i class="fas fa-home"></i> Home</a>
    <a href="../songs/all-songs.html" onclick="logout()"><i class="fas fa-music"></i> All Songs</a>
    <a href="../index.html#categories" onclick="logout()"><i class="fas fa-layer-group"></i> Categories</a>
    <a href="../about-contact.html" onclick="logout()"><i class="fas fa-info-circle"></i> About</a>
  </div>
</nav>

  <main class="container">
  <button onclick="goBack()" class="material-back-btn">
			<span class="material-icons">arrow_back</span> Back
		</button>
    <div class="top-bar">
      <div class="search-group">
        <input type="text" id="searchInput" placeholder="Search by name or email..." />
        <button onclick="searchUsers()">Search</button>
        <button onclick="openAddModal()">➕ Add User</button>
      </div>
    </div>
<br>
    <table>
      <thead>
        <tr>
          <th>Username</th>
          <th>Email</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="userTable">
        <tr><td colspan="4">No users loaded.</td></tr>
      </tbody>
    </table>

    <p class="status" id="statusMessage"></p>
  </main>

<!-- Add/Edit Modal -->
<div class="modal" id="userModal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal()">×</span>
    <h3 id="modalTitle">Add User</h3>
    <form id="userForm">
      <input type="hidden" name="id" />
      <label>Name:</label>
      <input type="text" name="name" required />
      <label>Email:</label>
      <input type="email" name="email" required />
      <label>Role:</label>
      <select name="role" required>
        <option value="">-- Select Role --</option>
        <option value="ADMIN">Admin</option>
        <option value="EDITOR">Editor</option>
        <option value="VIEWER">Viewer</option>
      </select>

      <p class="info" style="font-size: 0.9em; color: #555; margin-top: 10px;">
        ⚠️ <strong>Note:</strong> Username and Password will be set to the entered Email by default.
      </p>

      <button type="submit">Save</button>
    </form>
  </div>
</div>


  <script src="../scripts/manage-users.js"></script>
  <script src="../scripts/rotatingVerse.js"></script>
</body>
</html>
